{% extends "core/inc/generic_card.html" %}
{% load i18n mezzanine_tags event_tags keyword_tags disqus_tags organization_tags %}

{% block title %}
    {{ event.title }}
{% endblock %}

{% block url %}
    {{ event.get_absolute_url }}
{% endblock %}

{% block image %}
    {% with event.images.all|get_type:'card' as images %}
        {% if images %}
            <img src="{{ MEDIA_URL }}{% thumbnail images.0.file 352 352 %}" alt="" loading="lazy" class="c-article__picture"/>
        {% else %}
            {% with event.parent.images.all|get_type:'card' as images %}
                {% if images %}
                    <img src="{{ MEDIA_URL }}{% thumbnail images.0.file 352 352 %}" alt="" loading="lazy" class="c-article__picture"/>
                {% endif %}
            {% endwith %}
        {% endif %}
    {% endwith %}
{% endblock %}

{% block header %}
    {% keywords_for event as tags %}
    <ul class="c-article__tags">
        <li class="c-article__tag c-button c-button--rounded">{% if event.category %}{{ event.category }}{% else %}{{ event.parent.category }}{% endif %}</li>
    </ul>
    <p class="c-article__buttons">
        {% include 'agenda/event/includes/reserve.html' %}
    </p>
{% endblock %}

{% block before_title %}
    <p class="c-article__subtitle">
        {% include 'agenda/includes/event_date_line.html' with object=event %}
        {% if event.location %}
            <br/>
            {{ event.location.title }}{% if event.location.room %}, {{ event.location.room }}{% endif %}
        {% endif %}
    </p>
{% endblock %}
